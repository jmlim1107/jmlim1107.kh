<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liclass.admin.management.dashboard.dao.DashBoardDao">

    <select id="noticeList" parameterType="qnaBoard" resultType="qnaBoard">
    <![CDATA[
        select qna_no, qna_title, qna_content, qna_category, to_char(qna_date, 'YYYY-MM-DD')as qna_date
        from li_qna
        where qna_category = '공지' and rownum <=5
        order by qna_date desc
    ]]>
    </select>
    <select id="qnaList" parameterType="qnaBoard" resultType="qnaBoard">
    <![CDATA[
        select qna_no, qna_title, qna_content, qna_category, to_char(qna_date, 'YYYY-MM-DD')as qna_date
        from li_qna
        where qna_category = '문의' and rownum <=5
        order by qna_date desc
        ]]>
    </select>

    <select id="userState" parameterType="dashBoard" resultType="map">
        select
                (select count(*) from li_user where user_status = 0)activeUser,
                (select count(*) from li_user where user_status = 1)inactiveUser
        from dual
    </select>

    <select id="userReserve" parameterType="dashBoard" resultType="map">
        select
                (select count(*) from li_reserve)reserve,
                (select count(*) from li_reserve where r_state = 2)reserveCheck,
                (select count(*) from li_reserve where r_state = 3)reserveCancel
        from dual
    </select>

    <select id="allSales" parameterType="dashBoard" resultType="map">
        SELECT TO_CHAR(sum(NVL(pay_price, 0)), 'FM999,999,999,999') AS allSales FROM li_payment
    </select>

</mapper>