<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liclass.client.classes.dao.ClientClassDAO">

	<!--1. 클래스 리스트  -->
	<select id="classList" resultType="Class">
		select a.c_no, a.c_title,a.c_content,a.c_category,a.c_area,b.c_img_file as c_img_file,
				(select count(*) 
				from li_likes where c_no = a.c_no) as c_luv
        from li_class a left join li_class_img b on a.c_no = b.c_no
	</select>

	<!--2. 클래스 상세조회 -->
	<select id="classDetail" resultType="Class">
		select a.c_no,a.ct_bizno, a.c_title,a.c_content,a.c_leadtime,a.c_level,a.c_maxcnt,a.c_mincnt,a.c_category,a.c_area,b.c_img_file as c_img_file,
				(select count(*) 
				from li_likes where c_no = #{c_no}) as c_luv
        from li_class a left join li_class_img b on a.c_no = b.c_no
        where a.c_no= #{c_no}
	</select>
	
	<!--3. 해당클래스의 센터 상세조회-->
	<select id="centerDetail" resultType="Center" parameterType="Class">
		select a.ct_bizno, a.ct_name,a.ct_opbiz_ym,a.ct_intro,a.ct_mainart,a.ct_zipno,a.ct_addr,
				a.ct_detail_addr,a.ct_tel,a.ct_hmpg_addr
        from li_center a left join li_class b on a.ct_bizno = b.ct_bizno
        where b.ct_bizno= #{ct_bizno}
	</select> 
</mapper>